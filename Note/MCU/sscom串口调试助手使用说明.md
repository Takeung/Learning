# sscom串口调试助手使用说明

**【1】串口设置**：串口号可在面板或菜单中选择，串口号波特率可以直接在面板上选择，“数据位、停止位、校验位、流控”可以在“更多串口设置”里设置。 
对于主板自带的串口，波特率一般不能超过115200bps，对于USB串口，有些可以达到3000000bps或以上。
〖1.1〗自定义波特率：选择波特率列表最上面的Custom，可以自己输入波特率。
〖1.2〗串口设置错误有可能会打不开串口，这时可以关闭软件后，删除sscom51.ini，重新打开软件，将会按默认设置重新配置串口。删除之前建议另存一个备份。
〖1.3〗TCP/IP和UDP调试，在面板或菜单中选择对应网络通讯协议，并设置IP和端口，支持直接输入域名(不输入http://)，其它操作和串口一样。

**【2】发送字符串**：在发送输入框输入字符串，点“发送”。支持输入转义符号\x??，\\，\r，\n，\t，\v，\a，\b，\f，\0。
〖2.1〗如果勾选“加回车换行”，发送字符串时会自动加上回车换行，加回车换行仅对字符串发送有效，对HEX数据串无效。
〖2.2〗更改接收窗口的字体和颜色：点菜单的“显示/字体，大小”，可以选择自己喜爱的字体和颜色。字体和大小会自动保存。
〖2.3〗更改接收窗口的背景颜色：点菜单的“显示/背景颜色”，可以选择自己喜爱的背景颜色，并可保存。
〖2.4〗光标放在发送框内时，按“Ctrl+回车”，，将会发送发送框的内容，当“发送”按键获得焦点时，按回车也可以触发该按键。

**【3】发送HEX(十六进制)数据串**：勾选“HEX发送”，输入HEX字符串，点“发送”。HEX字符串输入例子：“12 00 FF 80”，输错将停止发送。
〖3.1〗“定时发送”：勾选后，发送数据区的数据将会按设定时间定时循环发送。
〖3.2〗显示HEX数据串：勾选“HEX显示”，将会按HEX方式显示收到的数据。

**【4】发送数据包自动加校验字节**：选择对应的“加校验”方法，有MODBUS-CRC、CRC16-CCITT、CRC32、ADD、异或XOR几种校验方式，
〖4.1〗在设置好不参与校验的帧头和帧尾字节位置后，剩余数据产生的校验字节会插入在发送的数据末/帧尾前发送出去，对字符串和十六进制数据串均有效。如果你勾选了加回车换行，字符串发送模式下回车换行的2个字节也计算在内。
〖4.2〗如果您的数据串有起始帧头，且帧头不计算入校验，可填写从第几个字节开始至末尾加校验。填1时，全部数据串都会计算校验。如果有2个字节帧头，从第3个字节开始是需要校验的数据，就填3。
〖4.3〗选择“至第几个字节”加校验。如果不留帧尾，就选“末尾”；如果留1个字节作为帧尾，帧尾不参与校验，就选-1，如果留2个字节作为帧尾，就选-2；依此类推。
例：我要发送帧头AA 55，数据06 FF 00 30 88 99 AB，校验XOR8，帧尾EE。 
    ①输入一条自定义数据(帧头+数据+帧尾)AA 55 06 FF 00 30 88 99 AB EE 
    ②填写“第3字节”开始校验
    ③选择“第-1字节”结束校验
    ④选择校验方式”：XOR8
    ⑤点对应的发送按钮.
〖4.4〗更详细的加校验帮助，请看该单项帮助.

**【5】自定义多字符串发送**：点开“扩展”，在里面输入好每条字符串。勾选前面的HEX代表这是一个HEX数据串。
双击数据输入框可输入该条的注释，注释将显示在发送按钮上。数据输入后会自动立即保存在ini文件中。
点击字符串右边的发送按钮即可以发送这条字符串到串口。面板上的“加回车换行”和“末尾加校验”对多条字符串的发送也有效。
〖5.1〗“循环发送”：勾选后，将自动按设定的该条目的时间间隔循环发送有内容的多条字符串。
自动循环发送时，按顺序号从小到大发送，顺序号为0条目不会发送.发送后延时该条目设定的延时时间.正在发送的数据串对应的注释文字会变成红色.
〖5.2〗点多条发送的界面上方的"多条帮助"可获得更多详细的帮助信息.请多看几遍！

**【6】终端仿真**：
〖6.1发送方式选择： 回车后发送输入行〗 在接收显示窗口里按“回车”，将会发送“在该窗口输入的最新一行字符+回车”。
〖6.2发送方式选择： 按键立即发送键值〗 在接收显示窗口里按键时，将会立即发送该键值。
〖6.3选择： 本地回显按键值〗 对于按键立即发送键值方式，勾选本项后按键会本地处理回显，显示出这个字符。
如调试某linux系统板，启动终端板后最后一行显示“$>”（有些终端不显示这个提示，也可以直接输入命令），
把光标放在接收窗口，输入“help”后，显示为“$>help”，此时再回车，将会发送“help+回车换行”，终端收到help命令后返回帮助信息。
这种类似DOS窗口的输入和返回功能，叫做终端仿真。可以很方便地用来调试一些交互性终端数据，不需要在发送框预先输入发送命令。
〖6.4〗当你输入“CTRL+Z”时，会发出0x1a字符，可用于中断(退出)终端运行的程序，这需要您的终端中具备处理相关字符的功能。

**【7】发送文件**：打开一个文件，点“发送文件”。发送期间可以点“停止”中断发送。
〖7.1〗在"发送/发送文件设置"菜单里，可以选择每发送256字节延时0，1，10，50，100毫秒。这样终端可以来得及在这个延时里处理数据。

**【8】DTR、RTS输出**：勾选即输出为有效，取消为无效。
输出无效时，USB 转串口芯片（如CH340）的DTR，RTS脚输出高电平，RS232口输出大约-9V至-12V。
输出有效时，USB 转串口芯片（如CH340）的DTR，RTS脚输出低电平，RS232口输出大约+9V至+12V。
注意：有很少的终端需要选择主机DTR有效，才会发送/接收串口数据。SSCOM32默认DTR输出有效的，
SSCOM5.0以上版本DTR输出可改变，如果收不到数据，可以试一下勾选DTR。

**【9】“加时间戳和分包显示”**：勾择后数据接收将会以"时间戳+数据包"的方式显示。
自动分包的检测方法是软件计算每段数据收到的时间间隔，如果两段数据的“时间间隔”大于“超时”时间，则自动分包显示，并标注发送和接收的数据包时间。“超时”时间默认是20MS，用户可以修改为恰当的时间，以得到正确的数据分包显示，超时时间过大和过小都会受到影响。
由于Windows的多线程运行机制，Windows的定时时间不是很准确，因此本超时时间的计算也不是十分精确，仅供参考。
分包效果如下，支持字符串和HEX数据串分包。◇是发送数据包的起始，□是发送数据包的结尾。◆是接收数据包的起始。
[09：30：38.094]发→◇help□ 
[09：30：38.172]收←◆Welcome to you！
〖9.1〗所加时间戳和发送的显示内容属于辅助显示信息。在点“HEX显示”切换时，之前的辅助显示信息将会消失。并按新收到数据重新开始计算显示。

**【10】“保存窗口和数据”**：点击后将分开保存“窗口显示的文本内容”和“接收到的原始串口数据(包含了二进制数据)”为两个文件。文件名取自当前时间，保存在当前目录。 
〖10.1〗窗口显示文本内容可能包含了数据包时间戳等辅助显示信息。加时间戳显示在切换HEX显示后，时间信息会丢失。所以如果数据过多需要以后分析，建议先点保存后在其它专业文本编辑工具里打开进行分析。 

**【11】“接收数据到文件”**：勾选该选项开始保存从串口接收到的数据，文件保存在当前目录。接收数据的大小仅仅受到硬盘空间的限制。
如果您有大量的数据需要分析，请使用“接收数据到文件”功能，接收完数据后再专用文本工具打开分析。 

**【12】数据波形**：点“菜单/小工具/数据波形”打开此工具，本功能可用于显示数据波形，如ADC转换的数据输出，长时间检测温度数据，数学算法图像等，可以直观地看到数据的波形图加以分析。
当接收缓冲区里收到数据后，点“显示图表”会显示最新的500个数据的数据波形，按前后<500和500>，可以显示前后的500个数据。
点“实时刷新”每秒刷新一次最新收到的数据。数据默认按每个字节显示为unsigned char，如需显示char，请点“带符号数”。

**【13】单片机ISP下载功能**：目前仅支持STM32，GD32，STC15等系列，STM32烧写64K字节用时大约5秒左右，目前为类似软件ISP下载速度业界最快。
打开“菜单/小工具/stm32/GD32ISP”，先打开你要写的HEX文件，选择速率。点“开始下载”。每次烧写都是读取最新的文件，烧写期间可以按“停止”中断结束。
本软件不计算目标单片机的flash容量是否足够，只是把所有要烧写的内容送入单片机。用户自己需要先比较你的芯片容量是否足够可以写入。
如果你用的是电脑主板串口，建议选稍慢速率。如果是USB转串口，可以使用快速速率。
如果您希望使用“一键ISP下载”功能，请按电路图连接BOOT0和MCURST。否则您在点下载之前，必须将单片机的BOOT0置低再复位，预先进入ISP状态。

**【14】TCP/IP和UDP调试，设置好IP和端口**：除了接口不同，数据的操作方式和串口一样。IP地址支持输入域名。

★关于接收窗口缓存大小：可以一直接收数据到所显示缓存设置字节上限，最大可以设置为5M字节，大于上限将自动截除旧的数据，只留下最新的100K字节。
接收窗口数据过多时，软件容易造成假死现象。如果您需要接收大量数据，请使用“接收数据到文件”功能，将数据收到文件后再用文本工具打开分析。
★注意：接收内容大于200K时，状态栏有红色提示，如果同时还有大量的数据正在连续高速进入，建议不要放大缩小窗口和切换hex显示，这样做可能会丢失数据。如果串口缓存数据过满快要溢出，可能会自动设置显示缓冲为200K。
★如果配置参数已经调乱到无法使用，删除或更名sscomXX.ini再启动本软件可以恢复默认值。

★如界面显示乱码，请按如下设置：
控制面板 / 区域和语言 / 管理 / 非Unicode程序的语言 / 更改系统区域语言设置为：中文(简体，中国)
Your Windows system is not Chinese.In order to avoid the garbled，Please change language：
Control panel / regional and language / management / non Unicode program language / change system regional language settings： Chinese (simplified， China)

## 问答集

●为什么插入USB串口时会自动刷新串口列表，拔出来时不刷新? 
答：这是为了可以在不小心拔出或者由于接触不良等情况造成串口号丢失时，重新插入后能自动续上上次的串口号继续通讯。如果拔出时就刷新串口号，就会丢失当前的串口号，程序会自动换上另一个可用的串口号，而无法自动恢复原来的被拔出的串口号。

●为什么我的串口号识别很慢，而且拔插可能有蓝屏的现象。
答：您的串口驱动和能和当前使用的windows版本不太兼容，建议升级安装最新的USB串口芯片驱动程序。

●为什么我的USB串口拔出来时程序弹出异常，点确认就退出了? 
答：本程序已对市面上的大部分串口做了优化，USB串口拔出时不会有提示，再重新插入时还能继续使用，但是对于少量厂家的USB串口，如pl2303在windows64位模式下运行时，可能是驱动兼容性不强，偶有USB拔出时无法正常检测的情况。建议您按正常操作使用USB串口，拔出之前，记得关闭串口，这样就没有任何问题了！另外，推荐使用【正版CH340】芯片，兼容性非常好.

●如何手动刷新串口列表? 
答：点菜单里的“刷新串口列表”，或者点面板上的绿色的刷新图标。在程序启动和有USB串口设备插入时，都会自动刷新一次。

●我要同时打开两个串口号怎么办? 
答：你可以打开两次sscom程序，就有两个窗口，可以分别设置为不同的串口号。

●我希望程序多开时各自有不同的保存配置怎么弄?
答：将sscom复制为几份，放在不同的目录中，再打开，它们就有各自不同的设置ini文件。

●程序多开时要注意什么问题? 
答：尽量将exe文件分开放在不同的目录中，以免共用一个ini文件造成冲突。

●可以将是否打开扩展的状态也保存起来吗? 
答：我们考虑过保存这个打开的状态，但是最后为了在程序刚打开是保持比较简洁清爽的状态，还是放弃了。

●修改设置后的配置参数立即保存到硬盘了吗?  
答：重要的数据如自定义多数据串，在输入时就会自动保存。一般参数不会立即保存。保存时是把软件所有的状态一起保存的。另外在程序退出时也会自动保存一次。如果不放心，也可以点“保存参数”立即保存一次。

●更多串口设置为什么是英文，不能切换为中文? 
答：这个小窗口是控件自带的，不太容易改变。另外其实中国人都看得懂这几个英文。

●我电脑屏幕太小，调试时想看更多接收的数据，希望面板缩小怎么弄? 
答：点隐藏“扩展”和按钮“—”隐藏面板。就可以最大化接收窗口。

●我有多个模块，总共几百个指令要使用，怎么办? 
答：建议将每个模块的指令输入保存后，将ini文件另存好。在调试该模块时，导入对应模块的ini文件即可。每组指令最多可以输入99条。

●预定义的多条字符串宽度不够显示怎么办? 
答：拖动中间的竖线条，就可以将多条字符串的宽度变宽和变窄。

●按钮上的命令注释显示不全怎么办? 
答：点上面的“+、-”按钮，就可以改变发送命令按钮的宽度，加宽点就显示完整了。

●如何输入多条预定义字符串的注释? 
答：鼠标双击字符串输入框，就会弹出一个对话框来输入注释。

●导入早期版本的ini时，出现了一些奇怪的数据? 
答：这是由于5.10版之后从50条预定义数据串，增加到了99条。ini的组织格式不同，原先的一些设置数据被当成了数据串了。这是垃圾，您可以修改它们为自己的数据串即可。

发送数据：

●SSCOM5一共有哪几种方式可以发送数据? 
答：1.点发送按钮，可以将面板发送框里面的数据按十六进制HEX方式或字符串ASC方式发送出去.
   2.打开自定义多条字符串发送后(在扩展内)，点击多条字符串后面对应的发送按钮，可以将该条数据发送出去.面板的加回车换行和加校验对此发送数据也有作用.
   3.将光标定位在接收数据框里，按键盘时，此时具备终端仿真模式发送(类似于DOS界面).可以在发送菜单里选择是按行回车后发送行，还是按按键立即发送键值.
   4.点发送文件，可以发送所选的文件内容.支持任意大小文件.包括文本和二进制文件.

●为何发送AT指令，在新版本SSCOM5无效，而在旧版本SSCOM32没有问题?? 
答：这是因为5.0版本以上将"发送新行"改成了"加回车换行"，你没有勾选"加回车换行"，终端收不到回车指令。

●发送文件时波特率设置错误，时间太久想中断怎么办? 
答：点“停止”按钮。

●可以发送和接收二进制文件吗? 
答：可以，本软件支持所有的二进制数据发送给和接收。

●我在终端仿真时，希望按下按键就把输入的键值发出去，并且要显示出来怎么弄? 
答：选择菜单里的“按键立即发送”和“本地回显”。

●我的数据串有帧头字节，校验时不想计入帧头字节怎么办？
答：设置“加校验”功能时，输入起始第几个字节，输入1时全部字节都会校验。如想从第3个字节开始校验，就输入3.

●我的数据串有帧尾字节，校验时不想计入帧尾字节怎么办？
答：设置“加校验”功能时，选择至末尾第几个字节，选择“末尾”时全部字节都会校验。如果最后1个字节是帧尾，就选择-1.

●数据包加校验是对哪些数据校验?
答：对你设置的除帧头帧尾的全部的数据校验，不包括生成的校验字节自己。校验字节是插在帧尾前面的.

●我想看到加的校验字节是什么，从哪里看?
答：就在您选择的校验协议后面的一个输入框里，当数据发送出去后，校验字节就显示在这里。

●我希望发送指令后自动添加回车换行怎么弄?
答：可以勾选面板上的“加回车换行”。

●我希望在发送的字符串中间插入回车换行怎么办?
答：使用转义字符：“\r\n”。另外我们还支持\x??，\\，\r，\n，\t，\v，\a，\b，\f，\0。

●多条字符串的顺序号有什么作用?可以全部都输入1吗? 
答：如果你要自动循环发送多条指令，指令就按照该顺序号由小到大发送。顺序号为0的不发送。全部输入1的话，就按从上到下的顺序发送。

●多条数据串的延时有什么作用? 
答：在该条数据串发送之后，会延时对应的时间（毫秒），再继续发送下一条数据串。

接收、保存和显示：

●切换HEX显示后时间戳和发送的内容为何看不到了?  
答：时间戳和数据包头尾的几个标记是辅助显示信息，切换HEX显示方式后辅助显示信息就会丢失。如果需要这些时间戳信息，可以点“保存数据”，把他们保存到硬盘里再用文本编辑工具打开来分析。 由于时间戳功能是后加上去，发现如果保存所有的时间戳消耗的CPU比较多，为了速度就做成现在这样.

●点保存数据时为什么保存了两个文件? 
答：因为是分开保存“窗口显示的文本内容”和“接收到的原始串口数据(包含了二进制数据)”为两个文件。文件名取自当前时间，保存在当前目录。
窗口显示文本内容可能包含了数据包时间戳等辅助显示信息，或者是HEX显示方式的字符，原始串口数据是未经任何处理的二进制数据。两者是不同的。

●我要连续检测几天时间可能收到十几兆数据，怎么办?
答：请点击“接收数据到文件”，所有收到的数据都会保存到硬盘的文件中。文件名根据点击时的时间自动生成。这种方式所接收的数据无限额，仅由硬盘容量决定。

●怎么将接收窗口修改为黑底绿字? 
答：点“显示/字体”设置文字的大小和颜色，点“显示/背景颜色”选择您喜欢的背景颜色。

●显示接收的字符没有对齐，我想对齐怎么办? 
答：点“显示/字体”选择宋体，或者其它某些字体可以对齐，自己可以试一试。

●显示缓冲上限有什么要注意的? 
答：在数据进入缓冲的数量超过该上限时，将会自动丢弃一些数据，仅保留最新的100K字节。
显示缓冲设置过大，可能造成程序反应慢，界面假死。也可能会漏收数据。太小则收不齐您要分析的数据。目前默认的是1M字节，如果你不需要，可以设置小一些，如200K。

●显示时加时间戳有些数据包没有分开是怎么回事? 
答：可能是超时时间设置太大了。或者您的数据包之间的时间间隔很小，或者根本就没有间隔。
请在计算时间间隔时，加上数据包传输的时间。Windows的定时测量不会很准确，也可能造成一些计算误差。
记住，超时时间一定要比两个数据包的时间间隔小才能正确分包。但是也不能太小或者设置为0，那样可能会把正常的数据包当成很多个小包。具体的超时时间还请您多试试，找到最合适的时间。

●为什么我在打开我的终端板时SSCOM5会收到很多"\0"? 但是SSCOM32就不会.
答：这是因为你的终端板在启动时发送了很多值0x00的数据，如一大堆的毛刺，也会认为是一堆的0x00。由于0x00是不可显示字符，所以sscom32的字符串模式下没有显示出来.但是sscom5对于收到的0x00，会以转义符"\0"的形式显示出来.

●为什么我的串口在sscom5以上收不到数据? 在sscom32却可以?
答：请试一下勾选DTR，不勾选RTS.有些设备使用了DTR作为电源供给232芯片.

功能：

●SSCOM可以实现“帧头+数据+校验+帧尾”的高级数据结构发送方式吗? 
答：从5.13版已可以实现，请参考帮助菜单里的“数据串加校验帮助”。

●数据波形有什么用处? 
答：可以显示数据形成的曲线，如ADC采样得到的数据，代表温度、速度等各种模拟量。配合硬件的ADC采集，还可以当作简单的示波器用。该功能还未做完全.

●stm32ISP烧写如何操作?速度快吗?  
答：烧写速度是很快的，接近使用仿真器烧写。烧写64K字节用时大约5秒左右。
打开“扩展/stm32ISP”，先打开你要写的HEX文件，选择速率。点“开始下载”。每次烧写都是读取最新的文件，烧写期间可以按“停止”中断结束。
本软件不计算目标单片机的flash容量是否足够，只是把所有要烧写的内容送入单片机。用户自己需要先比较你的芯片容量是否足够可以写入。
如果你用的是电脑主板串口，建议选第一档稍慢速率。如果是USB转串口，建议选适中速率。
如果您希望使用“一键ISP下载”功能，请按电路图连接BOOT0和MCURST。否则您在点下载之前，必须将单片机的BOOT0置低再复位，让用户板预先进入ISP状态。

●网络接口和串口有什么区别? 
答：他们是不同的通讯方式的物理接口。
在本软件中，您选择好以一种物理接口并建立连接以后，数据流的处理方式是相同的。

●网络调试时，怎么知道是否已经连接成功? 
答：在下面的状态栏中，会显示“已连接”，这时就可以开始通讯。

●TCPserver时，我怎么知道客户端的IP地址和端口? 
答：在连接成功后，下面的状态栏会显示出客户端的IP地址和端口。

●TCPserver时，我有多个网卡，怎么知道客户端连到了哪个网卡上? 
答：在连接成功后，下面的状态栏会显示出所连接到的服务器网卡的IP地址和端口。

●TCP可以自己做服务器，自己又做客服端和自己连接吗? 
答：本软件设置为不可以，理论上是可以的。但是你可以程序双开，一个做服务器，一个做客户端。

●我希望同时打开网络调试和串口调试怎么办?  
答：本软件已设定一个程序只能同时打开一种连接。
建议复制两个程序后，放到不同的目录双开。一个调试网络接口，一个调试串口。

其它：

●使用遇到问题是如何更有效地得到帮助?  
答：详细描述您遇到的问题，在QQ群提问是可@群主，并贴图，贴图不要贴界面的局部，要贴完整的软件界面出来.

●能否提供定制软件服务?  
答：很抱歉目前无法提供软件服务.您可以把您的要求提出来，如果是大众化的要求我们会考虑做进去.

●SSCOM未来还有哪些功能计划?  
答：还有以下开发计划：
①示波器功能.高速(40-80M)采样示波器硬件DIY，虾坛虾友有机会免费获得，必须同时是嘉立创F客户.
②数值转换计算器，可转换各种数据类型包括字符串.
③LUA脚本支持，可以快速编写各种专有工作流程.
④JSON接口，可支持异地设备如电脑手机平板的浏览器JS脚本调用串口调试.
⑤VT100终端仿真协议.
⑥Ymodem协议文件传输